resource "alicloud_cs_serverless_kubernetes" "serverless" {
  name                           = "vpnet_serverless"
  version                        = "1.24.6-aliyun.1"
  vpc_id                         = alicloud_vpc.vpc.id
  vswitch_ids                    = [alicloud_vswitch.vswitch.id]
  new_nat_gateway                = true
  endpoint_public_access_enabled = true
  deletion_protection            = false
  load_balancer_spec             = "slb.s2.small"
  time_zone                      = "Asia/Shanghai" 
  service_cidr                   = "10.1.0.0/20"
  service_discovery_types        = ["PrivateZone"]
}

# Output the Kubernetes cluster details
output "cluster_details" {
  value = {
    api_server_endpoint = alicloud_cs_serverless_kubernetes_cluster.vpnet_serverless.api_server_endpoint
    cluster_id          = alicloud_cs_serverless_kubernetes_cluster.vpnet_serverless.cluster_id
    kubeconfig          = alicloud_cs_serverless_kubernetes_cluster.vpnet_serverless.kubeconfig
  }
}
